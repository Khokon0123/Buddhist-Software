<!DOCTYPE html>
    <html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá‡¶∞ ‡¶¨‡ßå‡¶¶‡ßç‡¶ß ‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ - ‡¶â‡¶§‡ßç‡¶§‡¶∞‡¶æ‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶ì ‡¶ê‡¶§‡¶ø‡¶π‡ßç‡¶Ø</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-image: url('background.jpg'), url('background.png'), url('background.jpeg'), linear-gradient(135deg, rgba(102, 126, 234, 0.85) 0%, rgba(118, 75, 162, 0.85) 100%);
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            min-height: 100vh;
            padding: 20px;
            color: #333;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: 0;
            pointer-events: none;
        }

        .app-main {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .app-header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 30px 20px;
            position: relative;
            z-index: 1;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            backdrop-filter: blur(5px);
        }

        .app-header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7), 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .app-header p {
            font-size: 1.2rem;
            opacity: 0.95;
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.6);
        }


        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            align-items: center;
        }

        .search-bar {
            position: relative;
            flex: 1;
            min-width: 250px;
        }

        .search-input {
            width: 100%;
            padding: 12px 40px 12px 15px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .search-input:focus {
            outline: none;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .clear-search {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            font-size: 24px;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            border-radius: 50%;
        }

        .clear-search:hover {
            background: #f0f0f0;
            color: #333;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-primary {
            background: #4CAF50;
            color: white;
        }

        .btn-primary:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .btn-secondary {
            background: #2196F3;
            color: white;
        }

        .btn-secondary:hover {
            background: #0b7dda;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: #f44336;
            color: white;
        }

        .btn-danger:hover {
            background: #da190b;
            transform: translateY(-2px);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid white;
            color: white;
        }

        .btn-outline:hover {
            background: white;
            color: #667eea;
        }

        .story-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .story-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .story-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .story-image {
            width: 100%;
            height: 200px;
            overflow: hidden;
            background: #f0f0f0;
        }

        .story-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .story-content {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .story-content h2 {
            color: #333;
            margin-bottom: 8px;
            font-size: 1.5rem;
        }

        .occupation {
            color: #667eea;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .dates {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 12px;
        }

        .biography-preview {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
            flex-grow: 1;
        }

        .story-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .story-actions .btn {
            flex: 1;
            min-width: 80px;
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .empty-state h2 {
            color: #333;
            margin-bottom: 10px;
        }

        .empty-state p {
            color: #666;
            font-size: 1.1rem;
        }

        .story-form-container {
            display: flex;
            justify-content: center;
            padding: 20px;
        }

        .story-form {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 100%;
        }

        .story-form h2 {
            color: #333;
            margin-bottom: 25px;
            font-size: 2rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 30px;
        }

        .story-detail-container {
            display: flex;
            justify-content: center;
            padding: 20px;
        }

        .story-detail {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-width: 900px;
            width: 100%;
        }

        .back-button {
            margin-bottom: 20px;
        }

        .detail-image {
            width: 100%;
            max-height: 400px;
            overflow: hidden;
            border-radius: 8px;
            margin-bottom: 30px;
            background: #f0f0f0;
        }

        .detail-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .detail-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .detail-header h1 {
            color: #333;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .detail-occupation {
            color: #667eea;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .detail-dates {
            color: #666;
            font-size: 1.1rem;
        }

        .detail-content {
            margin-bottom: 30px;
        }

        .detail-content h2 {
            color: #333;
            font-size: 1.8rem;
            margin-top: 30px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
        }

        .detail-content h2:first-child {
            margin-top: 0;
        }

        .biography-text {
            line-height: 1.8;
            color: #555;
            font-size: 1.1rem;
        }

        .biography-text p {
            margin-bottom: 15px;
        }

        .achievements-list {
            list-style: none;
            padding: 0;
        }

        .achievements-list li {
            padding: 12px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            border-radius: 4px;
            color: #555;
        }

        .detail-meta {
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 20px;
            color: #666;
            font-size: 0.9rem;
        }

        .detail-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .app-header h1 {
                font-size: 2rem;
            }

            .controls {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            .story-list {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .form-actions {
                flex-direction: column;
            }
        }
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .login-box {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            max-width: 400px;
            width: 100%;
            text-align: center;
        }

        .login-box h2 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.8rem;
        }

        .login-box p {
            color: #666;
            margin-bottom: 25px;
            font-size: 0.95rem;
        }

        .login-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 15px;
        }

        .login-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .admin-badge {
            display: inline-block;
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-left: 10px;
            font-weight: 600;
        }

        .logout-btn {
            background: #f44336;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-left: 15px;
        }

        .logout-btn:hover {
            background: #da190b;
        }

        .user-profile-btn {
            background: #2196F3;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-left: 10px;
        }

        .user-profile-btn:hover {
            background: #0b7dda;
        }

        .user-badge {
            display: inline-block;
            background: rgba(33, 150, 243, 0.2);
            color: #2196F3;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-left: 10px;
            font-weight: 600;
        }

        .profile-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .profile-tab {
            padding: 10px 20px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 1rem;
            color: #666;
            transition: all 0.3s;
        }

        .profile-tab.active {
            color: #2196F3;
            border-bottom-color: #2196F3;
            font-weight: 600;
        }

        .profile-tab:hover {
            color: #2196F3;
        }

        .top-navigation {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            margin-bottom: 20px;
            border-radius: 0 0 12px 12px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            max-width: 1200px;
            margin: 0 auto;
        }

        .nav-item {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-weight: 600;
            font-size: 1rem;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .nav-item.active {
            background: rgba(255, 255, 255, 0.25);
            border-color: white;
        }

        .section-content {
            display: none;
        }

        .section-content.active {
            display: block;
        }

        .short-story-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .short-story-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .short-story-title {
            font-size: 1.3rem;
            color: #333;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .short-story-preview {
            color: #666;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .short-story-meta {
            font-size: 0.9rem;
            color: #999;
        }

        .info-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .info-section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .info-section h3 {
            color: #667eea;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        .info-section p {
            color: #555;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .info-section ul {
            color: #555;
            line-height: 1.8;
            margin-left: 20px;
        }

        .info-section li {
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <!-- User Login/Register Screen -->
    <div id="userAuthScreen" class="login-container">
        <div class="login-box">
            <div class="profile-tabs">
                <button class="profile-tab active" id="loginTab" onclick="switchAuthTab('login')">‡¶≤‡¶ó‡¶á‡¶®</button>
                <button class="profile-tab" id="registerTab" onclick="switchAuthTab('register')">‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡¶®</button>
            </div>
            
            <!-- Login Form -->
            <div id="loginForm">
                <h2>üë§ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶≤‡¶ó‡¶á‡¶®</h2>
                <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                <input 
                    type="text" 
                    id="loginIdentifier" 
                    class="login-input" 
                    placeholder="‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞"
                    onkeypress="if(event.key === 'Enter') userLogin()"
                />
                <input 
                    type="password" 
                    id="loginPassword" 
                    class="login-input" 
                    placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°"
                    onkeypress="if(event.key === 'Enter') userLogin()"
                />
                <button class="btn btn-primary" onclick="userLogin()" style="width: 100%;">
                    ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
                <p id="userLoginError" style="color: #f44336; margin-top: 15px; display: none; font-size: 0.9rem;">
                    ‡¶≠‡ßÅ‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø! ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
                </p>
            </div>

            <!-- Register Form -->
            <div id="registerForm" style="display: none;">
                <h2>üìù ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
                <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                <input 
                    type="text" 
                    id="regName" 
                    class="login-input" 
                    placeholder="‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡¶æ‡¶Æ *"
                />
                <input 
                    type="email" 
                    id="regEmail" 
                    class="login-input" 
                    placeholder="‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ"
                />
                <input 
                    type="tel" 
                    id="regPhone" 
                    class="login-input" 
                    placeholder="‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞"
                />
                <p style="font-size: 0.85rem; color: #666; margin: -10px 0 10px 0;">
                    * ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡ßá‡¶∞ ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï
                </p>
                <input 
                    type="password" 
                    id="regPassword" 
                    class="login-input" 
                    placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° *"
                />
                <input 
                    type="password" 
                    id="regConfirmPassword" 
                    class="login-input" 
                    placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶® *"
                    onkeypress="if(event.key === 'Enter') userRegister()"
                />
                <button class="btn btn-primary" onclick="userRegister()" style="width: 100%;">
                    ‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
                <p id="userRegisterError" style="color: #f44336; margin-top: 15px; display: none; font-size: 0.9rem;"></p>
            </div>
        </div>
    </div>

    <!-- Admin Login Screen -->
    <div id="adminLoginScreen" class="login-container hidden">
        <div class="login-box">
            <h2>üîê ‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï ‡¶≤‡¶ó‡¶á‡¶®</h2>
            <p>‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï‡¶ó‡¶£ ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®</p>
            <input 
                type="password" 
                id="adminPassword" 
                class="login-input" 
                placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"
                onkeypress="if(event.key === 'Enter') checkAdminLogin()"
            />
            <button class="btn btn-primary" onclick="checkAdminLogin()" style="width: 100%;">
                ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
            </button>
            <button class="btn btn-outline" onclick="showUserAuth()" style="width: 100%; margin-top: 10px;">
                ‚Üê ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶≤‡¶ó‡¶á‡¶®‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®
            </button>
            <p id="adminLoginError" style="color: #f44336; margin-top: 15px; display: none; font-size: 0.9rem;">
                ‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°! ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
            </p>
        </div>
    </div>

    <!-- Main App (hidden until login) -->
    <div id="mainApp" class="hidden">
    <!-- Top Navigation -->
    <div class="top-navigation">
        <div class="nav-menu">
            <div class="nav-item active" onclick="showSection('content')">üìö ‡¶ï‡¶®‡¶ü‡ßá‡¶®‡ßç‡¶ü</div>
            <div class="nav-item" onclick="showSection('village')">üèòÔ∏è ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ</div>
            <div class="nav-item" onclick="showSection('writer')">‚úçÔ∏è ‡¶≤‡ßá‡¶ñ‡¶ï</div>
            <div class="nav-item" onclick="showSection('management')">‚öôÔ∏è ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ</div>
            <div class="nav-item" onclick="showSection('stories')">üìñ ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ‡¶∏‡¶Æ‡ßÇ‡¶π</div>
        </div>
    </div>

    <!-- Content Section -->
    <div id="contentSection" class="section-content active">
        <div class="app-main">
            <div class="info-section">
                <h2>üìö ‡¶ï‡¶®‡¶ü‡ßá‡¶®‡ßç‡¶ü - ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ</h2>
                <p>‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶¨‡¶ø‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶¨‡ßá‡¶®‡•§ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶™‡¶°‡¶º‡¶§‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
            </div>
            <div id="shortStoriesContainer" style="max-width: 1200px; margin: 0 auto; padding: 20px;">
                <!-- Short stories will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Village Section -->
    <div id="villageSection" class="section-content">
        <div class="app-main">
            <div class="info-section" style="max-width: 1200px; margin: 0 auto;">
                <h2>üèòÔ∏è ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶ì ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶¨‡¶ø‡¶™‡ßç‡¶≤‡¶¨</h2>
                <p>‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶¨‡¶ø‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶è‡¶¨‡¶Ç ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶¨‡¶ø‡¶™‡ßç‡¶≤‡¶¨‡ßá‡¶∞ ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏ ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶ì ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§</p>
            </div>
            
            <div style="max-width: 1200px; margin: 0 auto; padding: 20px;">
                <div class="controls" style="margin-bottom: 30px;">
                    <button id="addVillageBtn" class="btn btn-primary hidden" onclick="showVillageForm()">
                        + ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>
                
                <div id="villageListContainer">
                    <!-- Villages will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Village Form View -->
    <div id="villageFormView" class="section-content">
        <div class="app-main">
            <div class="story-form-container">
                <div class="story-form">
                    <h2 id="villageFormTitle">‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
                    <form id="villageForm" onsubmit="handleVillageFormSubmit(event)">
                        <div class="form-group">
                            <label for="villageName">‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ *</label>
                            <input
                                type="text"
                                id="villageName"
                                name="villageName"
                                required
                                placeholder="‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"
                            />
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="villageDistrict">‡¶ú‡ßá‡¶≤‡¶æ</label>
                                <input
                                    type="text"
                                    id="villageDistrict"
                                    name="villageDistrict"
                                    placeholder="‡¶ú‡ßá‡¶≤‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ"
                                />
                            </div>

                            <div class="form-group">
                                <label for="villageUpazila">‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ</label>
                                <input
                                    type="text"
                                    id="villageUpazila"
                                    name="villageUpazila"
                                    placeholder="‡¶â‡¶™‡¶ú‡ßá‡¶≤‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ"
                                />
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="villageDescription">‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá *</label>
                            <textarea
                                id="villageDescription"
                                name="villageDescription"
                                required
                                rows="6"
                                placeholder="‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶®, ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏, ‡¶ú‡¶®‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ, ‡¶∏‡¶Ç‡¶∏‡ßç‡¶ï‡ßÉ‡¶§‡¶ø ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."
                            ></textarea>
                        </div>

                        <div class="form-group">
                            <label for="villageRevolution">‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶¨‡¶ø‡¶™‡ßç‡¶≤‡¶¨/‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏ *</label>
                            <textarea
                                id="villageRevolution"
                                name="villageRevolution"
                                required
                                rows="8"
                                placeholder="‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶¨‡¶ø‡¶™‡ßç‡¶≤‡¶¨, ‡¶Æ‡ßÅ‡¶ï‡ßç‡¶§‡¶ø‡¶Ø‡ßÅ‡¶¶‡ßç‡¶ß‡ßá ‡¶Ö‡¶¨‡¶¶‡¶æ‡¶®, ‡¶ê‡¶§‡¶ø‡¶π‡¶æ‡¶∏‡¶ø‡¶ï ‡¶ò‡¶ü‡¶®‡¶æ, ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."
                            ></textarea>
                        </div>

                        <div class="form-group">
                            <label for="villageImageUrl">‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶õ‡¶¨‡¶ø‡¶∞ URL</label>
                            <input
                                type="url"
                                id="villageImageUrl"
                                name="villageImageUrl"
                                placeholder="https://example.com/village.jpg"
                            />
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn-outline" onclick="cancelVillageForm()">
                                ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <span id="villageSubmitButtonText">‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Writer Section -->
    <div id="writerSection" class="section-content">
        <div class="app-main">
            <div class="info-section" style="max-width: 1200px; margin: 0 auto;">
                <h2>‚úçÔ∏è ‡¶≤‡ßá‡¶ñ‡¶ï</h2>
                <p>‡¶è‡¶á ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ü‡¶´‡¶∞‡ßç‡¶Æ‡ßá ‡¶Ø‡¶æ‡¶∞‡¶æ ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶≤‡¶ø‡¶ñ‡ßá‡¶õ‡ßá‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶¨‡¶¶‡¶æ‡¶® ‡¶∞‡ßá‡¶ñ‡ßá‡¶õ‡ßá‡¶®:</p>
                
                <h3>‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶≤‡ßá‡¶ñ‡¶ï</h3>
                <p><strong>‡¶ñ‡ßã‡¶ï‡¶®</strong></p>
                <p>‡¶è‡¶á ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ü‡¶´‡¶∞‡ßç‡¶Æ‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∑‡ßç‡¶†‡¶æ‡¶§‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶≤‡ßá‡¶ñ‡¶ï‡•§ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá‡¶∞ ‡¶¨‡ßå‡¶¶‡ßç‡¶ß ‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶® ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π, ‡¶ó‡¶¨‡ßá‡¶∑‡¶£‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶®‡¶•‡¶ø‡¶≠‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶ú‡ßá ‡¶®‡¶ø‡¶Ø‡¶º‡ßã‡¶ú‡¶ø‡¶§‡•§</p>
                
                <h3>‡¶Ö‡¶¨‡¶¶‡¶æ‡¶®‡¶ï‡¶æ‡¶∞‡ßÄ</h3>
                <ul>
                    <li>‡¶¨‡¶ø‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶¨‡ßå‡¶¶‡ßç‡¶ß ‡¶∏‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶Ø‡¶º‡ßá‡¶∞ ‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø‡¶¨‡ßÉ‡¶®‡ßç‡¶¶</li>
                    <li>‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏‡¶¨‡¶ø‡¶¶ ‡¶è‡¶¨‡¶Ç ‡¶ó‡¶¨‡ßá‡¶∑‡¶ï‡¶ó‡¶£</li>
                    <li>‡¶∏‡¶æ‡¶Æ‡¶æ‡¶ú‡¶ø‡¶ï ‡¶ï‡¶∞‡ßç‡¶Æ‡ßÄ ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßç‡¶¨‡ßá‡¶ö‡ßç‡¶õ‡¶æ‡¶∏‡ßá‡¶¨‡¶ï‡¶ó‡¶£</li>
                </ul>

                <h3>‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø</h3>
                <p>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá‡¶∞ ‡¶¨‡ßå‡¶¶‡ßç‡¶ß ‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®, ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶¨‡¶¶‡¶æ‡¶®‡¶ï‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶≠‡¶¨‡¶ø‡¶∑‡ßç‡¶Ø‡ßé ‡¶™‡ßç‡¶∞‡¶ú‡¶®‡ßç‡¶Æ‡ßá‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶™‡ßå‡¶Å‡¶õ‡ßá ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡•§</p>
            </div>
        </div>
    </div>

    <!-- Management Section -->
    <div id="managementSection" class="section-content">
        <div class="app-main">
            <div class="info-section" style="max-width: 1200px; margin: 0 auto;">
                <h2>‚öôÔ∏è ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ</h2>
                <p>‡¶è‡¶á ‡¶∏‡¶´‡¶ü‡¶ì‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶∞‡¶ü‡¶ø ‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶®‡¶æ ‡¶ï‡¶∞‡ßá‡¶®:</p>
                
                <h3>‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï</h3>
                <p><strong>‡¶ñ‡ßã‡¶ï‡¶®</strong></p>
                <p>‡¶∏‡¶´‡¶ü‡¶ì‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï</p>
                <ul>
                    <li>‡¶∏‡¶´‡¶ü‡¶ì‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶â‡¶®‡ßç‡¶®‡¶Ø‡¶º‡¶® ‡¶ì ‡¶∞‡¶ï‡ßç‡¶∑‡¶£‡¶æ‡¶¨‡ßá‡¶ï‡ßç‡¶∑‡¶£</li>
                    <li>‡¶ï‡¶®‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ</li>
                    <li>‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ</li>
                    <li>‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ</li>
                </ul>

                <h3>‡¶∏‡¶´‡¶ü‡¶ì‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø</h3>
                <ul>
                    <li><strong>‡¶®‡¶æ‡¶Æ:</strong> ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá‡¶∞ ‡¶¨‡ßå‡¶¶‡ßç‡¶ß ‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ - ‡¶â‡¶§‡ßç‡¶§‡¶∞‡¶æ‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶ì ‡¶ê‡¶§‡¶ø‡¶π‡ßç‡¶Ø</li>
                    <li><strong>‡¶∏‡¶Ç‡¶∏‡ßç‡¶ï‡¶∞‡¶£:</strong> 1.0.0</li>
                    <li><strong>‡¶â‡¶®‡ßç‡¶®‡¶Ø‡¶º‡¶®:</strong> HTML, CSS, JavaScript</li>
                    <li><strong>‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú:</strong> LocalStorage (‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞)</li>
                </ul>

                <h3>‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó</h3>
                <p>‡¶∏‡¶´‡¶ü‡¶ì‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡¶ø‡¶§ ‡¶ï‡ßã‡¶® ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶¨‡¶æ ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
            </div>
        </div>
    </div>

    <!-- Stories Section (Main App) -->
    <div id="storiesSection" class="section-content">
    <div class="app-header">
        <h1>üôè ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá‡¶∞ ‡¶¨‡ßå‡¶¶‡ßç‡¶ß ‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ</h1>
        <p>‡¶Ü‡¶ß‡ßç‡¶Ø‡¶æ‡¶§‡ßç‡¶Æ‡¶ø‡¶ï ‡¶ê‡¶§‡¶ø‡¶π‡ßç‡¶Ø‡ßá‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡¶∞‡¶æ‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞‡¶ï‡ßá ‡¶∏‡¶Æ‡ßç‡¶Æ‡¶æ‡¶®</p>
        <p style="font-size: 1rem; margin-top: 15px; opacity: 0.85; max-width: 900px; margin-left: auto; margin-right: auto; line-height: 1.8;">
            ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá‡¶∞ ‡¶∏‡ßá‡¶á ‡¶∏‡¶ï‡¶≤ ‡¶Æ‡¶π‡¶æ‡¶® ‡¶¨‡ßå‡¶¶‡ßç‡¶ß ‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∂‡ßç‡¶∞‡¶¶‡ßç‡¶ß‡¶æ ‡¶ú‡¶æ‡¶®‡¶æ‡¶§‡ßá ‡¶è‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá, ‡¶Ø‡¶æ‡¶∞‡¶æ ‡¶¨‡ßå‡¶¶‡ßç‡¶ß ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏‡ßá ‡¶Ö‡¶¨‡¶ø‡¶∏‡ßç‡¶Æ‡¶∞‡¶£‡ßÄ‡¶Ø‡¶º ‡¶Ö‡¶¨‡¶¶‡¶æ‡¶® ‡¶∞‡ßá‡¶ñ‡ßá‡¶õ‡ßá‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶Æ‡¶æ‡¶ú‡ßá ‡¶Ü‡¶≤‡ßã‡¶ï‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶ï‡¶æ ‡¶π‡¶Ø‡¶º‡ßá ‡¶¶‡¶æ‡¶Å‡¶°‡¶º‡¶ø‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡¶®‡•§ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶§‡¶æ‡¶Å‡¶¶‡ßá‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®‡¶ó‡¶æ‡¶•‡¶æ, ‡¶¶‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ, ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ, ‡¶Æ‡¶æ‡¶®‡¶¨‡¶∏‡ßá‡¶¨‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶Æ‡¶æ‡¶ú‡¶ó‡¶†‡¶®‡ßá ‡¶§‡¶æ‡¶Å‡¶¶‡ßá‡¶∞ ‡¶Ö‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø ‡¶ï‡¶æ‡¶ú‡¶ó‡ßÅ‡¶≤‡ßã ‡¶§‡ßÅ‡¶≤‡ßá ‡¶ß‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§
        </p>
        <p style="font-size: 0.95rem; margin-top: 12px; opacity: 0.8; max-width: 900px; margin-left: auto; margin-right: auto; line-height: 1.8; font-style: italic;">
            ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶â‡¶¶‡ßç‡¶¶‡ßá‡¶∂‡ßç‡¶Ø ‡¶π‡¶≤‡ßã‚Äî‡¶è‡¶ï‡¶ü‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡¶∞‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø ‡¶ì ‡¶∏‡¶Ç‡¶ó‡¶†‡¶ø‡¶§ ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ü‡¶´‡¶∞‡ßç‡¶Æ‡ßá ‡¶è‡¶∏‡¶¨ ‡¶Æ‡¶π‡¶æ‡¶™‡ßÅ‡¶∞‡ßÅ‡¶∑‡ßá‡¶∞ ‡¶ï‡¶∞‡ßç‡¶Æ‡¶ú‡ßÄ‡¶¨‡¶® ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ, ‡¶Ø‡¶æ‡¶§‡ßá ‡¶§‡¶æ‡¶Å‡¶¶‡ßá‡¶∞ ‡¶ú‡ßç‡¶û‡¶æ‡¶®, ‡¶™‡ßç‡¶∞‡¶ú‡ßç‡¶û‡¶æ ‡¶ì ‡¶Æ‡¶æ‡¶®‡¶¨‡¶ø‡¶ï‡¶§‡¶æ ‡¶≠‡¶¨‡¶ø‡¶∑‡ßç‡¶Ø‡ßé ‡¶™‡ßç‡¶∞‡¶ú‡¶®‡ßç‡¶Æ‡¶ï‡ßá ‡¶Ö‡¶®‡ßÅ‡¶™‡ßç‡¶∞‡¶æ‡¶£‡¶ø‡¶§ ‡¶ì ‡¶Ü‡¶≤‡ßã‡¶ï‡¶ø‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§
        </p>
    </div>

    <div class="app-main">
        <!-- Main View -->
        <div id="mainView">
            <div class="controls">
                <div class="search-bar">
                    <input 
                        type="text" 
                        id="searchInput"
                        class="search-input"
                        placeholder="‡¶®‡¶æ‡¶Æ, ‡¶â‡¶™‡¶æ‡¶ß‡¶ø, ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶¨‡¶æ ‡¶Ö‡¶¨‡¶¶‡¶æ‡¶® ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶æ‡¶∞‡ßá ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®..."
                    />
                    <button 
                        id="clearSearch" 
                        class="clear-search hidden"
                        onclick="clearSearch()"
                    >√ó</button>
                </div>
                <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                    <span id="userStatus" class="user-badge hidden"></span>
                    <span id="adminStatus" class="admin-badge hidden">‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï</span>
                    <button id="addStoryBtn" class="btn btn-primary hidden" onclick="showForm()">
                        + ‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ‡¶∞ ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                    <button id="userProfileBtn" class="user-profile-btn hidden" onclick="showUserProfile()">
                        ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤
                    </button>
                    <button id="adminLoginBtn" class="btn btn-outline hidden" onclick="showAdminLogin()">
                        ‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï ‡¶≤‡¶ó‡¶á‡¶®
                    </button>
                    <button id="userLogoutBtn" class="logout-btn hidden" onclick="userLogout()">
                        ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü
                    </button>
                    <button id="adminLogoutBtn" class="logout-btn hidden" onclick="adminLogout()">
                        ‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü
                    </button>
                </div>
            </div>
            <div id="storyListContainer"></div>
        </div>

        <!-- Form View -->
        <div id="formView" class="hidden">
            <div class="story-form-container">
                <div class="story-form">
                    <h2 id="formTitle">‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ‡¶∞ ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
                    <form id="storyForm" onsubmit="handleFormSubmit(event)">
                        <div class="form-group">
                            <label for="name">‡¶®‡¶æ‡¶Æ *</label>
                            <input
                                type="text"
                                id="name"
                                name="name"
                                required
                                placeholder="‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®"
                            />
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="birthDate">‡¶ú‡¶®‡ßç‡¶Æ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</label>
                                <input
                                    type="date"
                                    id="birthDate"
                                    name="birthDate"
                                />
                            </div>

                            <div class="form-group">
                                <label for="deathDate">‡¶Æ‡ßÉ‡¶§‡ßç‡¶Ø‡ßÅ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</label>
                                <input
                                    type="date"
                                    id="deathDate"
                                    name="deathDate"
                                />
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="occupation">‡¶â‡¶™‡¶æ‡¶ß‡¶ø/‡¶≠‡ßÇ‡¶Æ‡¶ø‡¶ï‡¶æ</label>
                            <input
                                type="text"
                                id="occupation"
                                name="occupation"
                                placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶∂‡ßç‡¶∞‡¶¶‡ßç‡¶ß‡ßá‡¶Ø‡¶º, ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶¨‡¶ü, ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶ï, ‡¶™‡¶£‡ßç‡¶°‡¶ø‡¶§"
                            />
                        </div>

                        <div class="form-group">
                            <label for="imageUrl">‡¶õ‡¶¨‡¶ø‡¶∞ URL</label>
                            <input
                                type="url"
                                id="imageUrl"
                                name="imageUrl"
                                placeholder="https://example.com/image.jpg"
                            />
                        </div>

                        <div class="form-group">
                            <label for="biography">‡¶ú‡ßÄ‡¶¨‡¶® ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶ì ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ *</label>
                            <textarea
                                id="biography"
                                name="biography"
                                required
                                rows="8"
                                placeholder="‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®, ‡¶Ü‡¶ß‡ßç‡¶Ø‡¶æ‡¶§‡ßç‡¶Æ‡¶ø‡¶ï ‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡¶æ, ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶¨‡ßå‡¶¶‡ßç‡¶ß‡¶ß‡¶∞‡ßç‡¶Æ ‡¶ì ‡¶∏‡¶Æ‡¶æ‡¶ú‡ßá ‡¶Ö‡¶¨‡¶¶‡¶æ‡¶® ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."
                            ></textarea>
                        </div>

                        <div class="form-group">
                            <label for="achievements">‡¶Ö‡¶¨‡¶¶‡¶æ‡¶® ‡¶ì ‡¶Ö‡¶∞‡ßç‡¶ú‡¶® (‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶è‡¶ï‡¶ü‡¶ø)</label>
                            <textarea
                                id="achievements"
                                name="achievements"
                                rows="4"
                                placeholder="‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Ö‡¶¨‡¶¶‡¶æ‡¶®, ‡¶Æ‡¶æ‡¶®‡¶¨‡¶ø‡¶ï ‡¶ï‡¶æ‡¶ú, ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶™‡ßç‡¶∞‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶∞‡ßç‡¶ú‡¶® ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ‡¶≠‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®, ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶è‡¶ï‡¶ü‡¶ø"
                            ></textarea>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn-outline" onclick="cancelForm()">
                                ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <span id="submitButtonText">‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Detail View -->
        <div id="detailView" class="hidden">
            <div class="story-detail-container">
                <div class="story-detail">
                    <button class="btn btn-outline back-button" onclick="showMainView()">
                        ‚Üê ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ‡¶ó‡ßÅ‡¶≤‡¶ø‡¶§‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®
                    </button>
                    <div id="detailContent"></div>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>

    <script>
        // User Profile System
        const USERS_STORAGE_KEY = 'appUsers';
        const CURRENT_USER_KEY = 'currentUser';
        const USER_SESSION_DURATION = 30 * 24 * 60 * 60 * 1000; // 30 days

        // Admin Configuration
        const ADMIN_PASSWORD = 'admin123'; // Change this to your desired password
        const ADMIN_SESSION_KEY = 'adminLoggedIn';
        const ADMIN_SESSION_DURATION = 24 * 60 * 60 * 1000; // 24 hours in milliseconds

        // Get all users
        function getAllUsers() {
            const users = localStorage.getItem(USERS_STORAGE_KEY);
            return users ? JSON.parse(users) : [];
        }

        // Save users
        function saveUsers(users) {
            localStorage.setItem(USERS_STORAGE_KEY, JSON.stringify(users));
        }

        // Get current user
        function getCurrentUser() {
            const user = localStorage.getItem(CURRENT_USER_KEY);
            if (!user) return null;
            
            const userData = JSON.parse(user);
            const now = new Date().getTime();
            
            if (now > userData.sessionExpires) {
                localStorage.removeItem(CURRENT_USER_KEY);
                return null;
            }
            
            return userData;
        }

        // Set current user session
        function setCurrentUser(user) {
            const expires = new Date().getTime() + USER_SESSION_DURATION;
            const userSession = {
                ...user,
                sessionExpires: expires
            };
            localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(userSession));
        }

        // Switch auth tab
        function switchAuthTab(tab) {
            if (tab === 'login') {
                document.getElementById('loginTab').classList.add('active');
                document.getElementById('registerTab').classList.remove('active');
                document.getElementById('loginForm').style.display = 'block';
                document.getElementById('registerForm').style.display = 'none';
            } else {
                document.getElementById('loginTab').classList.remove('active');
                document.getElementById('registerTab').classList.add('active');
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('registerForm').style.display = 'block';
            }
        }

        // User Registration
        function userRegister() {
            const name = document.getElementById('regName').value.trim();
            const email = document.getElementById('regEmail').value.trim();
            const phone = document.getElementById('regPhone').value.trim();
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            const errorEl = document.getElementById('userRegisterError');

            errorEl.style.display = 'none';

            // Validation
            if (!name) {
                errorEl.textContent = '‡¶®‡¶æ‡¶Æ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï!';
                errorEl.style.display = 'block';
                return;
            }

            if (!email && !phone) {
                errorEl.textContent = '‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡ßá‡¶∞ ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï!';
                errorEl.style.display = 'block';
                return;
            }

            if (password.length < 6) {
                errorEl.textContent = '‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß¨ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞‡ßá‡¶∞ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá!';
                errorEl.style.display = 'block';
                return;
            }

            if (password !== confirmPassword) {
                errorEl.textContent = '‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶Æ‡¶ø‡¶≤‡¶õ‡ßá ‡¶®‡¶æ!';
                errorEl.style.display = 'block';
                return;
            }

            // Check if user already exists
            const users = getAllUsers();
            const existingUser = users.find(u => 
                (email && u.email === email) || (phone && u.phone === phone)
            );

            if (existingUser) {
                errorEl.textContent = '‡¶è‡¶á ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡¶ø‡¶§!';
                errorEl.style.display = 'block';
                return;
            }

            // Create new user
            const newUser = {
                id: Date.now().toString(),
                name: name,
                email: email || null,
                phone: phone || null,
                password: password, // In production, this should be hashed
                createdAt: new Date().toISOString()
            };

            users.push(newUser);
            saveUsers(users);
            setCurrentUser(newUser);

            alert('‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡¶® ‡¶∏‡¶´‡¶≤! ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ ' + name + '!');
            showMainApp();
        }

        // User Login
        function userLogin() {
            const identifier = document.getElementById('loginIdentifier').value.trim();
            const password = document.getElementById('loginPassword').value;
            const errorEl = document.getElementById('userLoginError');

            errorEl.style.display = 'none';

            if (!identifier || !password) {
                errorEl.textContent = '‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!';
                errorEl.style.display = 'block';
                return;
            }

            const users = getAllUsers();
            const user = users.find(u => 
                (u.email === identifier || u.phone === identifier) && u.password === password
            );

            if (!user) {
                errorEl.textContent = '‡¶≠‡ßÅ‡¶≤ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤/‡¶´‡ßã‡¶® ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°!';
                errorEl.style.display = 'block';
                return;
            }

            setCurrentUser(user);
            
            // Show admin message if user is admin
            if (user.isAdmin) {
                alert('‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶´‡¶≤! ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ ' + user.name + '! (‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï)');
            } else {
                alert('‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶´‡¶≤! ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ ' + user.name + '!');
            }
            
            showMainApp();
        }

        // User Logout
        function userLogout() {
            if (confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶Ø‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
                localStorage.removeItem(CURRENT_USER_KEY);
                showUserAuth();
            }
        }

        // Show user profile
        function showUserProfile() {
            const user = getCurrentUser();
            if (!user) {
                showUserAuth();
                return;
            }

            alert('‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤:\n\n‡¶®‡¶æ‡¶Æ: ' + user.name + 
                  (user.email ? '\n‡¶á‡¶Æ‡ßá‡¶á‡¶≤: ' + user.email : '') +
                  (user.phone ? '\n‡¶´‡ßã‡¶®: ' + user.phone : '') +
                  '\n\n‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡¶®‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: ' + new Date(user.createdAt).toLocaleDateString('bn-BD'));
        }

        // Show user auth screen
        function showUserAuth() {
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('adminLoginScreen').classList.add('hidden');
            document.getElementById('userAuthScreen').classList.remove('hidden');
            switchAuthTab('login');
        }

        // Show admin login
        function showAdminLogin() {
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('userAuthScreen').classList.add('hidden');
            document.getElementById('adminLoginScreen').classList.remove('hidden');
        }

        // Navigation Section Management
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionName + 'Section').classList.add('active');
            
            // Add active class to clicked nav item
            event.target.classList.add('active');
            
            // Load content based on section
            if (sectionName === 'content') {
                loadShortStories();
            } else if (sectionName === 'village') {
                renderVillages();
            }
        }

        // Load short stories for content section
        function loadShortStories() {
            const stories = getStories();
            const container = document.getElementById('shortStoriesContainer');
            
            if (stories.length === 0) {
                container.innerHTML = `
                    <div class="info-section">
                        <p style="text-align: center; color: #666;">‡¶è‡¶ñ‡¶®‡¶ì ‡¶ï‡ßã‡¶® ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = stories.map(story => {
                const preview = story.biography.length > 150 
                    ? story.biography.substring(0, 150) + '...' 
                    : story.biography;
                
                return `
                    <div class="short-story-card" onclick="viewStoryFromContent('${story.id}')">
                        <div class="short-story-title">${escapeHtml(story.name)}</div>
                        ${story.occupation ? `<div style="color: #667eea; font-weight: 600; margin-bottom: 8px;">${escapeHtml(story.occupation)}</div>` : ''}
                        <div class="short-story-preview">${escapeHtml(preview)}</div>
                        <div class="short-story-meta">
                            ${story.birthDate ? new Date(story.birthDate).getFullYear() : ''}
                            ${story.birthDate && story.deathDate ? ' - ' : ''}
                            ${story.deathDate ? new Date(story.deathDate).getFullYear() : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // View story from content section
        function viewStoryFromContent(storyId) {
            const stories = getStories();
            const story = stories.find(s => s.id === storyId);
            
            if (story) {
                // Switch to stories section
                document.querySelectorAll('.section-content').forEach(section => {
                    section.classList.remove('active');
                });
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                document.getElementById('storiesSection').classList.add('active');
                const navItems = document.querySelectorAll('.nav-item');
                if (navItems.length > 4) {
                    navItems[4].classList.add('active');
                }
                
                // Show the story detail
                showDetail(story);
            }
        }

        // Village Management Functions
        function getVillages() {
            const villages = localStorage.getItem(VILLAGES_STORAGE_KEY);
            return villages ? JSON.parse(villages) : [];
        }

        function saveVillages(villages) {
            localStorage.setItem(VILLAGES_STORAGE_KEY, JSON.stringify(villages));
        }

        function renderVillages() {
            const villages = getVillages();
            const container = document.getElementById('villageListContainer');
            
            // Show add button if admin
            if (isAdmin()) {
                document.getElementById('addVillageBtn').classList.remove('hidden');
            } else {
                document.getElementById('addVillageBtn').classList.add('hidden');
            }
            
            if (villages.length === 0) {
                container.innerHTML = `
                    <div class="info-section">
                        <p style="text-align: center; color: #666;">‡¶è‡¶ñ‡¶®‡¶ì ‡¶ï‡ßã‡¶® ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = `
                <div class="story-list">
                    ${villages.map((village, index) => `
                        <div class="story-card">
                            ${village.imageUrl ? `
                                <div class="story-image">
                                    <img src="${escapeHtml(village.imageUrl)}" alt="${escapeHtml(village.name)}" onerror="this.style.display='none'">
                                </div>
                            ` : ''}
                            <div class="story-content">
                                <h2>${escapeHtml(village.name)}</h2>
                                ${village.district || village.upazila ? `
                                    <p class="occupation">
                                        ${village.district ? escapeHtml(village.district) : ''}
                                        ${village.district && village.upazila ? ', ' : ''}
                                        ${village.upazila ? escapeHtml(village.upazila) : ''}
                                    </p>
                                ` : ''}
                                <p class="biography-preview">
                                    ${escapeHtml(village.description.length > 200 
                                        ? village.description.substring(0, 200) + '...' 
                                        : village.description)}
                                </p>
                                <div class="story-actions">
                                    <button class="btn btn-secondary" data-action="view-village" data-index="${index}">
                                        ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
                                    </button>
                                    ${isAdmin() ? `
                                        <button class="btn btn-outline" data-action="edit-village" data-index="${index}">
                                            ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ
                                        </button>
                                        <button class="btn btn-danger" data-action="delete-village" data-id="${village.id}">
                                            ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®
                                        </button>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;

            // Add event listeners
            container.querySelectorAll('[data-action="view-village"]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const index = parseInt(btn.getAttribute('data-index'));
                    showVillageDetail(villages[index]);
                });
            });

            if (isAdmin()) {
                container.querySelectorAll('[data-action="edit-village"]').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const index = parseInt(btn.getAttribute('data-index'));
                        showVillageForm(villages[index]);
                    });
                });

                container.querySelectorAll('[data-action="delete-village"]').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const id = btn.getAttribute('data-id');
                        deleteVillage(id);
                    });
                });
            }
        }

        function showVillageForm(village = null) {
            // Hide village list and show form
            document.getElementById('villageSection').classList.remove('active');
            document.getElementById('villageFormView').classList.add('active');
            
            if (village) {
                document.getElementById('villageFormTitle').textContent = '‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®';
                document.getElementById('villageSubmitButtonText').textContent = '‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®';
                document.getElementById('villageName').value = village.name || '';
                document.getElementById('villageDistrict').value = village.district || '';
                document.getElementById('villageUpazila').value = village.upazila || '';
                document.getElementById('villageDescription').value = village.description || '';
                document.getElementById('villageRevolution').value = village.revolution || '';
                document.getElementById('villageImageUrl').value = village.imageUrl || '';
                document.getElementById('villageForm').dataset.editId = village.id;
            } else {
                document.getElementById('villageFormTitle').textContent = '‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®';
                document.getElementById('villageSubmitButtonText').textContent = '‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®';
                document.getElementById('villageForm').reset();
                delete document.getElementById('villageForm').dataset.editId;
            }
        }

        function cancelVillageForm() {
            document.getElementById('villageFormView').classList.remove('active');
            document.getElementById('villageSection').classList.add('active');
            document.getElementById('villageForm').reset();
        }

        function handleVillageFormSubmit(event) {
            event.preventDefault();
            
            if (!isAdmin()) {
                alert('‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï‡¶ó‡¶£ ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®!');
                return;
            }
            
            const formData = new FormData(event.target);
            const villageData = {
                name: formData.get('villageName'),
                district: formData.get('villageDistrict') || null,
                upazila: formData.get('villageUpazila') || null,
                description: formData.get('villageDescription'),
                revolution: formData.get('villageRevolution'),
                imageUrl: formData.get('villageImageUrl') || null
            };
            
            const villages = getVillages();
            const editId = event.target.dataset.editId;
            
            if (editId) {
                // Update existing village
                const index = villages.findIndex(v => v.id === editId);
                if (index !== -1) {
                    villages[index] = {
                        ...villages[index],
                        ...villageData,
                        updatedAt: new Date().toISOString()
                    };
                }
                alert('‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
            } else {
                // Create new village
                const newVillage = {
                    id: generateId(),
                    ...villageData,
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                villages.push(newVillage);
                alert('‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
            }
            
            saveVillages(villages);
            cancelVillageForm();
            renderVillages();
        }

        function showVillageDetail(village) {
            const container = document.getElementById('villageListContainer');
            container.innerHTML = `
                <div class="story-detail-container">
                    <div class="story-detail">
                        <button class="btn btn-outline back-button" onclick="renderVillages()">
                            ‚Üê ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ‡¶Ø‡¶º ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®
                        </button>
                        
                        ${village.imageUrl ? `
                            <div class="detail-image">
                                <img src="${escapeHtml(village.imageUrl)}" alt="${escapeHtml(village.name)}" onerror="this.style.display='none'">
                            </div>
                        ` : ''}
                        
                        <div class="detail-header">
                            <h1>${escapeHtml(village.name)}</h1>
                            ${village.district || village.upazila ? `
                                <p class="detail-occupation">
                                    ${village.district ? escapeHtml(village.district) : ''}
                                    ${village.district && village.upazila ? ', ' : ''}
                                    ${village.upazila ? escapeHtml(village.upazila) : ''}
                                </p>
                            ` : ''}
                        </div>
                        
                        <div class="detail-content">
                            <h2>‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá</h2>
                            <div class="biography-text">
                                ${village.description.split('\n').map(p => `<p>${escapeHtml(p)}</p>`).join('')}
                            </div>
                            
                            <h2>‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶¨‡¶ø‡¶™‡ßç‡¶≤‡¶¨/‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏</h2>
                            <div class="biography-text">
                                ${village.revolution.split('\n').map(p => `<p>${escapeHtml(p)}</p>`).join('')}
                            </div>
                        </div>
                        
                        <div class="detail-meta">
                            <p><strong>‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá:</strong> ${new Date(village.createdAt).toLocaleDateString('bn-BD')}</p>
                            ${village.updatedAt !== village.createdAt ? `
                                <p><strong>‡¶∏‡¶∞‡ßç‡¶¨‡¶∂‡ßá‡¶∑ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü:</strong> ${new Date(village.updatedAt).toLocaleDateString('bn-BD')}</p>
                            ` : ''}
                        </div>
                        
                        ${isAdmin() ? `
                            <div class="detail-actions">
                                <button class="btn btn-secondary" id="editVillageDetailBtn">
                                    ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ
                                </button>
                                <button class="btn btn-danger" id="deleteVillageDetailBtn">
                                    ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®
                                </button>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
            
            // Add event listeners for edit/delete buttons
            if (isAdmin()) {
                const editBtn = document.getElementById('editVillageDetailBtn');
                const deleteBtn = document.getElementById('deleteVillageDetailBtn');
                if (editBtn) {
                    editBtn.addEventListener('click', () => {
                        showVillageForm(village);
                    });
                }
                if (deleteBtn) {
                    deleteBtn.addEventListener('click', () => {
                        deleteVillage(village.id);
                    });
                }
            }
        }
                    </div>
                </div>
            `;
        }

        function deleteVillage(id) {
            if (!isAdmin()) {
                alert('‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï‡¶ó‡¶£ ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®!');
                return;
            }
            
            if (!confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶Ø‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶á ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
                return;
            }
            
            const villages = getVillages().filter(v => v.id !== id);
            saveVillages(villages);
            renderVillages();
            alert('‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
        }

        // Check if user is admin
        function isAdmin() {
            // Check if current user has admin privileges
            const currentUser = getCurrentUser();
            if (currentUser && currentUser.isAdmin === true) {
                return true;
            }
            
            // Check admin session (for password-based admin login)
            const session = localStorage.getItem(ADMIN_SESSION_KEY);
            if (!session) return false;
            
            const sessionData = JSON.parse(session);
            const now = new Date().getTime();
            
            // Check if session is still valid
            if (now > sessionData.expires) {
                localStorage.removeItem(ADMIN_SESSION_KEY);
                return false;
            }
            
            return true;
        }

        // Set admin session
        function setAdminSession() {
            const expires = new Date().getTime() + ADMIN_SESSION_DURATION;
            localStorage.setItem(ADMIN_SESSION_KEY, JSON.stringify({ expires }));
        }

        // Check admin login
        function checkAdminLogin() {
            const password = document.getElementById('adminPassword').value;
            
            if (password === ADMIN_PASSWORD) {
                setAdminSession();
                showMainApp();
            } else {
                document.getElementById('adminLoginError').style.display = 'block';
                document.getElementById('adminPassword').value = '';
                document.getElementById('adminPassword').focus();
            }
        }


        // Show main app
        function showMainApp() {
            document.getElementById('userAuthScreen').classList.add('hidden');
            document.getElementById('adminLoginScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            
            const currentUser = getCurrentUser();
            const adminLoggedIn = isAdmin();
            
            // Show user info
            if (currentUser) {
                document.getElementById('userStatus').textContent = currentUser.name;
                document.getElementById('userStatus').classList.remove('hidden');
                document.getElementById('userProfileBtn').classList.remove('hidden');
                document.getElementById('userLogoutBtn').classList.remove('hidden');
            } else {
                document.getElementById('userStatus').classList.add('hidden');
                document.getElementById('userProfileBtn').classList.add('hidden');
                document.getElementById('userLogoutBtn').classList.add('hidden');
            }
            
            // Show admin controls
            if (adminLoggedIn) {
                document.getElementById('addStoryBtn').classList.remove('hidden');
                document.getElementById('adminStatus').classList.remove('hidden');
                document.getElementById('adminLogoutBtn').classList.remove('hidden');
                document.getElementById('adminLoginBtn').classList.add('hidden');
                document.getElementById('addVillageBtn').classList.remove('hidden');
            } else {
                document.getElementById('addStoryBtn').classList.add('hidden');
                document.getElementById('adminStatus').classList.add('hidden');
                document.getElementById('adminLogoutBtn').classList.add('hidden');
                document.getElementById('adminLoginBtn').classList.remove('hidden');
                document.getElementById('addVillageBtn').classList.add('hidden');
            }
            
            // Refresh stories display
            renderStories();
            
            // Load content based on active section
            if (document.getElementById('contentSection').classList.contains('active')) {
                loadShortStories();
            } else if (document.getElementById('villageSection').classList.contains('active')) {
                renderVillages();
            }
        }

        // Admin logout
        function adminLogout() {
            if (confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶Ø‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶™‡ßç‡¶∞‡¶∂‡¶æ‡¶∏‡¶ï ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
                localStorage.removeItem(ADMIN_SESSION_KEY);
                showMainApp();
            }
        }

        // Initialize default user
        function initializeDefaultUser() {
            const users = getAllUsers();
            const defaultUserExists = users.find(u => 
                u.email === 'khokon' || u.phone === 'khokon' || u.name === 'khokon'
            );
            
            if (!defaultUserExists) {
                const defaultUser = {
                    id: 'default_user_' + Date.now(),
                    name: 'khokon',
                    email: 'khokon',
                    phone: null,
                    password: 'joy1234',
                    isAdmin: true, // Grant admin privileges
                    createdAt: new Date().toISOString()
                };
                users.push(defaultUser);
                saveUsers(users);
            } else {
                // Update existing user to be admin
                const userIndex = users.findIndex(u => 
                    u.email === 'khokon' || u.phone === 'khokon' || u.name === 'khokon'
                );
                if (userIndex !== -1) {
                    users[userIndex].isAdmin = true;
                    saveUsers(users);
                }
            }
        }

        // Initialize - check if user is logged in
        window.addEventListener('DOMContentLoaded', function() {
            // Initialize default user
            initializeDefaultUser();
            
            const currentUser = getCurrentUser();
            
            if (currentUser) {
                // User is logged in, show main app
                showMainApp();
                // Load short stories for content section
                loadShortStories();
            } else {
                // No user logged in, show login screen
                document.getElementById('userAuthScreen').classList.remove('hidden');
                document.getElementById('mainApp').classList.add('hidden');
                document.getElementById('adminLoginScreen').classList.add('hidden');
            }
        });

        // Data storage using localStorage
        const STORAGE_KEY = 'lifeStories';
        const VILLAGES_STORAGE_KEY = 'villages';
        const VILLAGES_STORAGE_KEY = 'villages';

        // Get all stories from localStorage
        function getStories() {
            const stories = localStorage.getItem(STORAGE_KEY);
            return stories ? JSON.parse(stories) : [];
        }

        // Save stories to localStorage
        function saveStories(stories) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(stories));
        }

        // Generate unique ID
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        // Current state
        let currentView = 'main';
        let editingStoryId = null;
        let selectedStory = null;
        let allStories = getStories();
        let filteredStories = allStories;

        // View management
        function showView(view) {
            document.getElementById('mainView').classList.add('hidden');
            document.getElementById('formView').classList.add('hidden');
            document.getElementById('detailView').classList.add('hidden');
            
            document.getElementById(view + 'View').classList.remove('hidden');
            currentView = view;
        }

        function showMainView() {
            showView('main');
            editingStoryId = null;
            selectedStory = null;
            renderStories();
        }

        function showForm(story = null) {
            editingStoryId = story ? story.id : null;
            showView('form');
            
            if (story) {
                document.getElementById('formTitle').textContent = '‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ‡¶∞ ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®';
                document.getElementById('submitButtonText').textContent = '‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®';
                document.getElementById('name').value = story.name || '';
                document.getElementById('birthDate').value = story.birthDate ? story.birthDate.split('T')[0] : '';
                document.getElementById('deathDate').value = story.deathDate ? story.deathDate.split('T')[0] : '';
                document.getElementById('occupation').value = story.occupation || '';
                document.getElementById('imageUrl').value = story.imageUrl || '';
                document.getElementById('biography').value = story.biography || '';
                document.getElementById('achievements').value = Array.isArray(story.achievements) 
                    ? story.achievements.join('\n') 
                    : '';
            } else {
                document.getElementById('formTitle').textContent = "‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ‡¶∞ ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®";
                document.getElementById('submitButtonText').textContent = '‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®';
                document.getElementById('storyForm').reset();
            }
        }

        function cancelForm() {
            showMainView();
        }

        function showDetail(story) {
            selectedStory = story;
            showView('detail');
            renderDetail(story);
        }

        // Form submission
        function handleFormSubmit(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            
            if (!formData.get('name') || !formData.get('biography')) {
                alert('‡¶®‡¶æ‡¶Æ ‡¶è‡¶¨‡¶Ç ‡¶ú‡ßÄ‡¶¨‡¶®‡ßÄ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï');
                return;
            }
            
            const achievements = formData.get('achievements')
                .split('\n')
                .map(a => a.trim())
                .filter(a => a.length > 0);

            const storyData = {
                name: formData.get('name'),
                birthDate: formData.get('birthDate') || null,
                deathDate: formData.get('deathDate') || null,
                occupation: formData.get('occupation') || '',
                biography: formData.get('biography'),
                achievements: achievements,
                imageUrl: formData.get('imageUrl') || ''
            };

            let stories = getStories();

            if (editingStoryId) {
                // Update existing story
                const index = stories.findIndex(s => s.id === editingStoryId);
                if (index !== -1) {
                    stories[index] = {
                        ...stories[index],
                        ...storyData,
                        updatedAt: new Date().toISOString()
                    };
                }
                alert('‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ‡¶∞ ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
            } else {
                // Create new story
                const newStory = {
                    id: generateId(),
                    ...storyData,
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                stories.push(newStory);
                alert('‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ‡¶∞ ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
            }

            saveStories(stories);
            allStories = stories;
            showMainView();
        }

        // Delete story
        function deleteStory(id) {
            if (!confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶Ø‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶á ‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ‡¶∞ ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶∏‡¶∞‡¶æ‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
                return;
            }

            const stories = getStories().filter(s => s.id !== id);
            saveStories(stories);
            allStories = stories;
            
            if (selectedStory && selectedStory.id === id) {
                showMainView();
            } else {
                renderStories();
            }
            
            alert('‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ‡¶∞ ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶∞‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
        }

        // Edit story
        function editStory(story) {
            showForm(story);
        }

        // Render stories list
        function renderStories() {
            const container = document.getElementById('storyListContainer');
            
            if (filteredStories.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h2>‡¶è‡¶ñ‡¶®‡¶ì ‡¶ï‡ßã‡¶® ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶®‡ßá‡¶á</h2>
                        <p>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá‡¶∞ ‡¶è‡¶ï‡¶ú‡¶® ‡¶∂‡ßç‡¶∞‡¶¶‡ßç‡¶ß‡ßá‡¶Ø‡¶º ‡¶¨‡ßå‡¶¶‡ßç‡¶ß ‡¶≠‡¶ø‡¶ï‡ßç‡¶∑‡ßÅ‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶® ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = `
                <div class="story-list">
                    ${filteredStories.map((story, index) => `
                        <div class="story-card">
                            ${story.imageUrl ? `
                                <div class="story-image">
                                    <img src="${escapeHtml(story.imageUrl)}" alt="${escapeHtml(story.name)}" onerror="this.style.display='none'">
                                </div>
                            ` : ''}
                            <div class="story-content">
                                <h2>${escapeHtml(story.name)}</h2>
                                ${story.occupation ? `<p class="occupation">${escapeHtml(story.occupation)}</p>` : ''}
                                ${(story.birthDate || story.deathDate) ? `
                                    <p class="dates">
                                        ${story.birthDate ? new Date(story.birthDate).getFullYear() : ''}
                                        ${story.birthDate && story.deathDate ? ' - ' : ''}
                                        ${story.deathDate ? new Date(story.deathDate).getFullYear() : ''}
                                    </p>
                                ` : ''}
                                <p class="biography-preview">
                                    ${escapeHtml(story.biography.length > 200 
                                        ? story.biography.substring(0, 200) + '...' 
                                        : story.biography)}
                                </p>
                                <div class="story-actions">
                                    <button class="btn btn-secondary" data-action="view" data-index="${index}">
                                        ‡¶Ü‡¶∞‡¶ì ‡¶™‡¶°‡¶º‡ßÅ‡¶®
                                    </button>
                                    ${isAdmin() ? `
                                        <button class="btn btn-outline" data-action="edit" data-index="${index}">
                                            ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ
                                        </button>
                                        <button class="btn btn-danger" data-action="delete" data-id="${story.id}">
                                            ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®
                                        </button>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;

            // Add event listeners to buttons
            container.querySelectorAll('[data-action="view"]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const index = parseInt(btn.getAttribute('data-index'));
                    showDetail(filteredStories[index]);
                });
            });

            container.querySelectorAll('[data-action="edit"]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const index = parseInt(btn.getAttribute('data-index'));
                    showForm(filteredStories[index]);
                });
            });

            container.querySelectorAll('[data-action="delete"]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = btn.getAttribute('data-id');
                    deleteStory(id);
                });
            });
        }

        // Render story detail
        function renderDetail(story) {
            const container = document.getElementById('detailContent');
            const biographyParagraphs = story.biography.split('\n').filter(p => p.trim());
            
            container.innerHTML = `
                ${story.imageUrl ? `
                    <div class="detail-image">
                        <img src="${escapeHtml(story.imageUrl)}" alt="${escapeHtml(story.name)}" onerror="this.style.display='none'">
                    </div>
                ` : ''}
                <div class="detail-header">
                    <h1>${escapeHtml(story.name)}</h1>
                    ${story.occupation ? `<p class="detail-occupation">${escapeHtml(story.occupation)}</p>` : ''}
                    ${(story.birthDate || story.deathDate) ? `
                        <p class="detail-dates">
                            ${story.birthDate ? new Date(story.birthDate).getFullYear() : ''}
                            ${story.birthDate && story.deathDate ? ' - ' : ''}
                            ${story.deathDate ? new Date(story.deathDate).getFullYear() : ''}
                        </p>
                    ` : ''}
                </div>
                <div class="detail-content">
                    <h2>‡¶ú‡ßÄ‡¶¨‡¶®‡ßÄ</h2>
                    <div class="biography-text">
                        ${biographyParagraphs.map(p => `<p>${escapeHtml(p)}</p>`).join('')}
                    </div>
                    ${story.achievements && story.achievements.length > 0 ? `
                        <h2>‡¶Ö‡¶∞‡ßç‡¶ú‡¶®</h2>
                        <ul class="achievements-list">
                            ${story.achievements.map(a => `<li>${escapeHtml(a)}</li>`).join('')}
                        </ul>
                    ` : ''}
                </div>
                <div class="detail-meta">
                    <p><strong>‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá:</strong> ${new Date(story.createdAt).toLocaleDateString('bn-BD')}</p>
                    ${story.updatedAt !== story.createdAt ? `
                        <p><strong>‡¶∏‡¶∞‡ßç‡¶¨‡¶∂‡ßá‡¶∑ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü:</strong> ${new Date(story.updatedAt).toLocaleDateString('bn-BD')}</p>
                    ` : ''}
                </div>
                ${isAdmin() ? `
                    <div class="detail-actions">
                        <button class="btn btn-secondary" id="editDetailBtn">
                            ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ
                        </button>
                        <button class="btn btn-danger" id="deleteDetailBtn">
                            ‡¶ï‡¶æ‡¶π‡¶ø‡¶®‡ßÄ ‡¶∏‡¶∞‡¶æ‡¶®
                        </button>
                    </div>
                ` : ''}
            `;

            // Add event listeners (only if admin)
            if (isAdmin()) {
                const editBtn = document.getElementById('editDetailBtn');
                const deleteBtn = document.getElementById('deleteDetailBtn');
                if (editBtn) {
                    editBtn.addEventListener('click', () => {
                        showForm(story);
                    });
                }
                if (deleteBtn) {
                    deleteBtn.addEventListener('click', () => {
                        deleteStory(story.id);
                    });
                }
            }
        }

        // Search functionality
        function handleSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const clearBtn = document.getElementById('clearSearch');
            
            if (query.trim() === '') {
                filteredStories = allStories;
                clearBtn.classList.add('hidden');
            } else {
                filteredStories = allStories.filter(story =>
                    story.name.toLowerCase().includes(query) ||
                    (story.occupation && story.occupation.toLowerCase().includes(query)) ||
                    story.biography.toLowerCase().includes(query) ||
                    (story.achievements && story.achievements.some(a => a.toLowerCase().includes(query)))
                );
                clearBtn.classList.remove('hidden');
            }
            
            renderStories();
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            handleSearch();
        }

        // Escape HTML to prevent XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }


        // Initialize
        document.getElementById('searchInput').addEventListener('input', handleSearch);
        renderStories();
    </script>
</body>
</html>

